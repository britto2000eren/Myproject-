MySQL:
-- ecommerce_db.sql
CREATE DATABASE IF NOT EXISTS ecommerce_db;
USE ecommerce_db;

-- categories
CREATE TABLE IF NOT EXISTS categories (
  cat_id INT AUTO_INCREMENT PRIMARY KEY,
  cat_name VARCHAR(120) NOT NULL
);

INSERT INTO categories (cat_name) VALUES
('Electronics'),('Fashion'),('Home Appliances'),('Mobiles'),('Grocery');

-- users (basic - store hashed password)
CREATE TABLE IF NOT EXISTS users (
  uid INT AUTO_INCREMENT PRIMARY KEY,
  username VARCHAR(50) NOT NULL UNIQUE,
  email VARCHAR(100) NOT NULL UNIQUE,
  password VARCHAR(255) NOT NULL,
  role ENUM('admin','user') DEFAULT 'user',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- sample user (password: admin123) -> hash via PHP password_hash("admin123", PASSWORD_DEFAULT) if inserting via php
INSERT INTO users (username, email, password, role) VALUES
('admin','admin@example.com','$2y$10$w1v2x/EXAMPLEHASHwq0vZz2u', 'admin'); -- replace with real hash

-- products
CREATE TABLE IF NOT EXISTS products (
  pid INT AUTO_INCREMENT PRIMARY KEY,
  pname VARCHAR(150) NOT NULL,
  price DECIMAL(10,2) NOT NULL,
  quantity INT NOT NULL DEFAULT 0,
  category INT DEFAULT NULL,
  description TEXT,
  image VARCHAR(255),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (category) REFERENCES categories(cat_id) ON DELETE SET NULL
);

INSERT INTO products (pname, price, quantity, category, description, image) VALUES
('FastTrack Watch', 3050.00, 10, 2, 'Men stylish watch', 'watch.jpg'),
('Samsung Mobile', 15000.00, 5, 4, 'Samsung smartphone', 'samsung.jpg'),
('LED TV 42"', 21000.00, 3, 1, '42 inch smart TV', 'tv.jpg');

-- orders + order_items (starter)
CREATE TABLE IF NOT EXISTS orders (
  order_id INT AUTO_INCREMENT PRIMARY KEY,
  uid INT,
  order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  total DECIMAL(10,2) DEFAULT 0,
  FOREIGN KEY (uid) REFERENCES users(uid) ON DELETE SET NULL
);

CREATE TABLE IF NOT EXISTS order_items (
  item_id INT AUTO_INCREMENT PRIMARY KEY,
  order_id INT,
  pid INT,
  quantity INT,
  price DECIMAL(10,2),
  FOREIGN KEY (order_id) REFERENCES orders(order_id) ON DELETE CASCADE,
  FOREIGN KEY (pid) REFERENCES products(pid) ON DELETE SET NULL
);

